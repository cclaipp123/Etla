<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡‘é¢å¤§å†™è½¬æ¢å·¥å…·</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .input-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
        }
        input[type="number"]:focus {
            border-color: #4CAF50;
            outline: none;
        }
        button {
            width: 100%;
            padding: 12px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-bottom: 20px;
        }
        button:hover {
            background-color: #45a049;
        }
        .result {
            padding: 15px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            min-height: 60px;
            font-size: 18px;
            color: #333;
            word-break: break-all;
        }
        .note {
            margin-top: 20px;
            padding: 10px;
            background-color: #e7f3ff;
            border-left: 4px solid #2196F3;
            font-size: 14px;
            color: #555;
        }
        .correct {
            color: #4CAF50;
            font-weight: bold;
        }
        .incorrect {
            color: #f44336;
            font-weight: bold;
        }
        .easter-egg {
            display: none;
            margin-top: 15px;
            text-align: center;
            padding: 15px;
            background: #fff9c4;
            border-radius: 10px;
            border: 2px solid #ffd54f;
            width: 100%;
        }
        .easter-egg p {
            font-size: 18px;
            font-weight: bold;
            color: #f57c00;
            margin-bottom: 10px;
        }
        .easter-egg img {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin-top: 10px;
            max-height: 300px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>é‡‘é¢å¤§å†™è½¬æ¢å·¥å…·</h1>
        
        <div class="input-group">
            <label for="amount">è¯·è¾“å…¥é‡‘é¢ï¼š</label>
            <input type="number" id="amount" placeholder="è¯·è¾“å…¥é˜¿æ‹‰ä¼¯æ•°å­—é‡‘é¢ï¼Œå¦‚ï¼š103184.41" step="0.01" min="0">
        </div>
        
        <button onclick="convertToChinese()">è½¬æ¢ä¸ºå¤§å†™</button>
        
        <div class="result" id="result">
            å¤§å†™é‡‘é¢å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...
        </div>
        
        <!-- å½©è›‹ -->
        <div class="easter-egg" id="easterEgg">
            <p>æ­å–œä½ å‘ç°äº†é‡å…½å…ˆè¾ˆï¼ğŸ‰</p>
            <img src="https://moegirl.icu/media/thumb/%E9%87%8E%E5%85%BD%E5%85%88%E8%BE%88%E6%9C%AC%E4%BD%93.png/417px-%E9%87%8E%E5%85%BD%E5%85%88%E8%BE%88%E6%9C%AC%E4%BD%93.png" alt="å½©è›‹å›¾ç‰‡" id="easterEggImage">
        </div>
        
        <div class="note">
            <strong>ä½¿ç”¨è¯´æ˜ï¼š</strong><br>
            1. è¾“å…¥é˜¿æ‹‰ä¼¯æ•°å­—é‡‘é¢ï¼Œæ”¯æŒå°æ•°ç‚¹åä¸¤ä½ï¼ˆè§’å’Œåˆ†ï¼‰<br>
            2. ç‚¹å‡»"è½¬æ¢ä¸ºå¤§å†™"æŒ‰é’®è·å–ä¸­æ–‡å¤§å†™é‡‘é¢<br>
            3. è½¬æ¢ç»“æœç¬¦åˆè´¢åŠ¡è§„èŒƒï¼Œè‡ªåŠ¨å¤„ç†"é›¶"çš„æ·»åŠ è§„åˆ™<br>
            <br>
            <strong>æµ‹è¯•ç”¨ä¾‹ï¼š</strong><br>
            - 103184.41 â†’ <span class="correct">äººæ°‘å¸å£¹æ‹¾ä¸‡é›¶åä»Ÿå£¹ä½°æŒæ‹¾è‚†å…ƒè‚†è§’å£¹åˆ†</span><br>
            - 10005.07 â†’ <span class="correct">äººæ°‘å¸å£¹ä¸‡é›¶ä¼å…ƒé›¶æŸ’åˆ†</span><br>
            - 1000.50 â†’ <span class="correct">äººæ°‘å¸å£¹ä»Ÿå…ƒé›¶ä¼è§’æ•´</span><br>
            - 3050100.01 â†’ <span class="correct">äººæ°‘å¸åä½°é›¶ä¼ä¸‡é›¶å£¹ä½°å…ƒé›¶å£¹åˆ†</span>
        </div>
    </div>

    <script>
        // å½©è›‹è®¡æ—¶å™¨
        let easterEggTimer = null;
        
        function convertToChinese() {
            const amount = document.getElementById('amount').value;
            const resultElement = document.getElementById('result');
            
            // æ£€æŸ¥è¾“å…¥æ˜¯å¦æœ‰æ•ˆ
            if (!amount || isNaN(amount) || parseFloat(amount) < 0) {
                resultElement.textContent = "è¯·è¾“å…¥æœ‰æ•ˆçš„æ­£æ•°é‡‘é¢";
                resultElement.style.color = "red";
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦ä¸ºå½©è›‹æ•°å­—
            if (amount === '114514') {
                resultElement.innerHTML = `<strong>äººæ°‘å¸å£¹æ‹¾å£¹ä¸‡è‚†ä»Ÿä¼ä½°å£¹æ‹¾è‚†å…ƒæ•´</strong>`;
                resultElement.style.color = "#333";
                
                // æ˜¾ç¤ºå½©è›‹
                showEasterEgg();
                return;
            }
            
            try {
                // æ­£å¸¸è½¬æ¢é€»è¾‘
                const chineseAmount = arabicToChinese(amount);
                resultElement.innerHTML = `<strong>${chineseAmount}</strong>`;
                resultElement.style.color = "#333";
            } catch (error) {
                resultElement.textContent = "è½¬æ¢å‡ºé”™ï¼Œè¯·æ£€æŸ¥è¾“å…¥æ ¼å¼";
                resultElement.style.color = "red";
            }
        }
        
        function showEasterEgg() {
            // æ˜¾ç¤ºå½©è›‹
            document.getElementById('easterEgg').style.display = 'block';
            
            // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
            if (easterEggTimer) {
                clearTimeout(easterEggTimer);
            }
            
            // è®¾ç½®3ç§’åè‡ªåŠ¨éšè—å½©è›‹
            easterEggTimer = setTimeout(() => {
                document.getElementById('easterEgg').style.display = 'none';
            }, 3000);
        }
        
        function arabicToChinese(number) {
            // å®šä¹‰æ•°å­—å¯¹åº”çš„å¤§å†™å­—ç¬¦
            const chineseNumbers = ['é›¶', 'å£¹', 'è´°', 'å', 'è‚†', 'ä¼', 'é™†', 'æŸ’', 'æŒ', 'ç–'];
            const chineseUnits = ['', 'æ‹¾', 'ä½°', 'ä»Ÿ'];
            const sectionUnits = ['', 'ä¸‡', 'äº¿', 'ä¸‡äº¿'];
            
            // å¤„ç†å°æ•°éƒ¨åˆ†
            let [integerPart, decimalPart = ''] = number.toString().split('.');
            
            // è¡¥é½å°æ•°ä½
            decimalPart = decimalPart.padEnd(2, '0').substring(0, 2);
            
            // å¦‚æœæ•´æ•°éƒ¨åˆ†ä¸º0
            if (integerPart === '0' || integerPart === '') {
                integerPart = '0';
            }
            
            // è½¬æ¢æ•´æ•°éƒ¨åˆ†
            let chineseInteger = '';
            
            // å°†æ•´æ•°éƒ¨åˆ†åˆ†ç»„ï¼Œæ¯4ä½ä¸€ç»„
            const sections = [];
            for (let i = integerPart.length; i > 0; i -= 4) {
                sections.push(integerPart.substring(Math.max(0, i - 4), i));
            }
            sections.reverse();
            
            // å¤„ç†æ¯ä¸€ç»„
            let lastSectionHadZero = false; // è®°å½•ä¸Šä¸€ç»„æ˜¯å¦æœ‰é›¶
            for (let i = 0; i < sections.length; i++) {
                const section = sections[i];
                let sectionChinese = '';
                let lastWasZero = false; // ä¸Šä¸€ä½æ˜¯å¦æ˜¯é›¶
                let hasNonZero = false; // è¿™ä¸€ç»„ä¸­æ˜¯å¦æœ‰éé›¶æ•°å­—
                
                // å¤„ç†ç»„å†…çš„æ¯ä¸€ä½
                for (let j = 0; j < section.length; j++) {
                    const digit = parseInt(section[j]);
                    const unit = chineseUnits[section.length - 1 - j];
                    
                    if (digit === 0) {
                        // å¦‚æœå½“å‰ä½æ˜¯0ï¼Œæ ‡è®°æœ‰é›¶
                        lastWasZero = true;
                    } else {
                        // å¦‚æœå‰é¢æœ‰é›¶ä¸”å½“å‰ä¸æ˜¯é›¶ï¼Œæ·»åŠ "é›¶"
                        if (lastWasZero && hasNonZero) {
                            sectionChinese += chineseNumbers[0];
                        }
                        sectionChinese += chineseNumbers[digit] + unit;
                        lastWasZero = false;
                        hasNonZero = true;
                    }
                }
                
                // æ·»åŠ ç»„å•ä½ï¼ˆä¸‡ã€äº¿ç­‰ï¼‰
                if (parseInt(section) !== 0 || (sections.length === 1 && parseInt(section) === 0)) {
                    sectionChinese += sectionUnits[sections.length - 1 - i];
                }
                
                // å¤„ç†ç»„ä¸ç»„ä¹‹é—´çš„é›¶
                if (i > 0 && sectionChinese === '' && lastSectionHadZero) {
                    // å¦‚æœå½“å‰ç»„å…¨ä¸ºé›¶ä¸”ä¸Šä¸€ç»„ä¹Ÿæœ‰é›¶ï¼Œä¸é‡å¤æ·»åŠ é›¶
                } else if (i > 0 && sectionChinese === '' && !lastSectionHadZero) {
                    chineseInteger += chineseNumbers[0];
                    lastSectionHadZero = true;
                } else {
                    // é¿å…è¿ç»­çš„é›¶
                    if (i > 0 && lastSectionHadZero && !sectionChinese.startsWith(chineseNumbers[0]) && parseInt(section) !== 0) {
                        chineseInteger += chineseNumbers[0];
                    }
                    chineseInteger += sectionChinese;
                    lastSectionHadZero = section.endsWith('0') || (lastWasZero && hasNonZero);
                }
            }
            
            // å¦‚æœæ•´æ•°éƒ¨åˆ†ä¸ºé›¶
            if (chineseInteger === '' || parseInt(integerPart) === 0) {
                chineseInteger = 'é›¶';
            }
            
            // æ·»åŠ "å…ƒ"
            chineseInteger += 'å…ƒ';
            
            // è½¬æ¢å°æ•°éƒ¨åˆ†
            let chineseDecimal = '';
            const jiao = parseInt(decimalPart[0] || '0');
            const fen = parseInt(decimalPart[1] || '0');
            
            if (jiao === 0 && fen === 0) {
                chineseDecimal = 'æ•´';
            } else if (jiao === 0 && fen > 0) {
                chineseDecimal = 'é›¶' + chineseNumbers[fen] + 'åˆ†';
            } else if (jiao > 0 && fen === 0) {
                chineseDecimal = chineseNumbers[jiao] + 'è§’æ•´';
            } else {
                chineseDecimal = chineseNumbers[jiao] + 'è§’' + chineseNumbers[fen] + 'åˆ†';
            }
            
            return 'äººæ°‘å¸' + chineseInteger + chineseDecimal;
        }
        
        // æ·»åŠ å›è½¦é”®æ”¯æŒ
        document.getElementById('amount').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                convertToChinese();
            }
        });
        
        // è¾“å…¥æ¡†å†…å®¹æ”¹å˜æ—¶éšè—å½©è›‹
        document.getElementById('amount').addEventListener('input', function() {
            document.getElementById('easterEgg').style.display = 'none';
            if (easterEggTimer) {
                clearTimeout(easterEggTimer);
            }
        });
    </script>
</body>
</html>